<html lang='en'>
  <head>
    <meta charset='UTF-8' />
    <meta http-equiv='X-UA-Compatible' content='IE=edge' />
    <meta name='viewport' content='width=device-width, initial-scale=1.0' />
    <title>Orders</title>
    <link rel='stylesheet' href='../css/style.css' />
    <link rel="stylesheet" href="../css/general.css"/>
     <script type="module" src="../js/orders.js" defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>
  <body>
    <div class="container">
    {{>header}}
    <div id='base'>
      {{>menu}}
      <div id='container'>
        <div class="container-table">
        <table id='tb-orders'>
          <thead class="thead-orders">
            <tr class='row'>
              <th>Order ID</th>
              <th>Order Date</th>
              <th>Order Items</th>
              <th>Delivery Charge</th>
              <th>Delivery Adddress</th>
              <th>Total</th>
              <th>Status</th>
              <th>Delivery Date</th>
              <th>Customer Name</th>
              <th>Customer Email</th>
              <th>Edit</th>
              <th>Remove</th>
            </tr>
          </thead>
          {{#each data}}
            <tr class='row' id="row-order" data-orderId="{{id}}" data-orderDate="{{created_at}}" data-address="{{delivery_address}}" data-date="{{updated_at}}" data-total="{{total}}" data-status="{{status}}">
              <td>{{id}}</td>
              <td>{{created_at}}</td>
              <td>
                <table class="tbl-orderitems">
              {{#each cart_items}}
              <tr>
                <td>
              {{books.title}}
               </td>
               <td>
               $ {{books.price}}
             </td>
             <td>
                &times;{{quantity}} 
                </td>
              </tr>
              {{/each}}
              </table>
              </td>
              <td>{{delivery_charge}}</td>
              <td>{{delivery_address}}</td>
              <td>${{total}}</td>
              <td>{{status}}</td>
              <td>{{updated_at}}</td>
              {{#if cart_items}}
              <td>{{users.username}}</td>
              <td>{{users.email}}</td>
              {{/if}}
              <td><button id='btn-update' ><img
                    src='../imgs/edit.png'
                    width='20px'
                    alt=''
                  /></button></td>
              <td><button id='btn-delete'>
                  <img src='../imgs/delete.png' width='20px' alt='' />
                </button></td>
            </tr>
          {{/each}}
        </table>
        </div>
      </div>
        <dialog class="modal" id="modal">
            <form method="dialog" id='orderForm'
            >
              <h3 id='h3-newbook'>Update Order</h3>

              <div class="div-addbooks">
                <label for='address'>
                  Delivery Address
                </label>
                <input
                  type='text'
                  id='address'
                  class="field"
                  name='address'
                  required
                />
              </div>

                <div class="div-addbooks">
                <label id='lbl-price' for='delivery_date'>
                  Delivery Date
                </label>
                <input
                  type='text'
                  id='delivery_date'
                  class="field"
                  name='delivery_date'
                  required
                />
              </div>
              <div class="div-status">
                <label for='status'>
                  Status
                </label>
                <select name="status" id="status">
                  </select>
              </div>
             
              <div class="div-buttons">
              <button type='submit' class='btn' id='btn-save'>Confirm</button>
            <button
                type='button'
                id='btn-cancel'              
              >Close</button>
              </div>
            </form>
        </dialog>
    </div>
    {{>footer}}
    </div>
  </body>
</html>